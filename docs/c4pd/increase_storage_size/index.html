<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/ai/blog/rss.xml" title="JS AI/ML notes Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ai/blog/atom.xml" title="JS AI/ML notes Blog Atom Feed"><title data-react-helmet="true">Increase storage size | JS AI/ML notes</title><meta data-react-helmet="true" property="og:url" content="https://junsulee75.github.io/ai/docs/c4pd/increase_storage_size"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Increase storage size | JS AI/ML notes"><meta data-react-helmet="true" name="description" content="Check the current storage configuration"><meta data-react-helmet="true" property="og:description" content="Check the current storage configuration"><link data-react-helmet="true" rel="shortcut icon" href="/ai/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://junsulee75.github.io/ai/docs/c4pd/increase_storage_size"><link data-react-helmet="true" rel="alternate" href="https://junsulee75.github.io/ai/docs/c4pd/increase_storage_size" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://junsulee75.github.io/ai/docs/c4pd/increase_storage_size" hreflang="x-default"><link rel="stylesheet" href="/ai/assets/css/styles.4c0ee6b8.css">
<link rel="preload" href="/ai/assets/js/runtime~main.5a258301.js" as="script">
<link rel="preload" href="/ai/assets/js/main.fdb5ad91.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ai/"><img src="/ai/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/ai/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">JS AI/ML notes</b></a><a class="navbar__item navbar__link navbar__link--active" href="/ai/docs/intro">Notes</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ai/docs/intro">README</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tools</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">CP4D</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ai/docs/c4pd/underlying_cp4d">db2u oltp resources on CP4D</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ai/docs/c4pd/creating_db2_dmc_cp4d">Creating DB2 and DMC instance in C4PD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ai/docs/c4pd/creating_db2wh_cp4d">Creating DB2 warehouse instance in C4PD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ai/docs/c4pd/install_db2_ocp">Install Db2u oltp on Red Hat Openshift without CP4D</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/ai/docs/c4pd/increase_storage_size">Increase storage size</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ai/docs/c4pd/create_ocs_storage">Create OCS storage</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">pd</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">999.MISC</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">999.Extras</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Increase storage size</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check-the-current-storage-configuration"></a>Check the current storage configuration<a class="hash-link" href="#check-the-current-storage-configuration" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="file-system-sizes"></a>File system sizes<a class="hash-link" href="#file-system-sizes" title="Direct link to heading">#</a></h3><ul><li>Find DB2 service pod name         </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># oc get pod -A</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE                                          NAME                                                              READY   STATUS      RESTARTS   AGE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">... </span></span><span class="token-line" style="color:#393A34"><span class="token plain">sandy                                              c-db2wh-1659492364975075-db2u-0                                   1/1     Running     0          58m</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>Log into the pod and check the file system sizes   </li></ul><p>In this example, <code>/mnt/bludata0</code> is almost full and only 48 MB is left.<br>
The related PVC is  <code>data-c-db2wh-1659492364975075-db2u-0</code> .      </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># oc exec -it c-db2wh-1659492364975075-db2u-0 -- su - db2inst1</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[db2inst1@c-db2wh-1659492364975075-db2u-0 - Db2U db2inst1]$ df -TH /mnt/blumeta0/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem Type Size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Used Avail Use% Mounted on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">172.30.97.139:6789,172.30.116.46:6789,172.30.163.78:6789:/volumes/csi/csi-vol-e294401d-12d0-</span></span><span class="token-line" style="color:#393A34"><span class="token plain">11ed-80cb-0a580a8203d1/d6cba1bb-6e1b-476f-8e92-5bb6131b5bd8 ceph 108G 676M 107G</span></span><span class="token-line" style="color:#393A34"><span class="token plain">1% /mnt/blumeta0</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[db2inst1@c-db2wh-1659492364975075-db2u-0 - Db2U db2inst1]$ du -sh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/mnt/blumeta0/db2/databases/db2inst1/*</span></span><span class="token-line" style="color:#393A34"><span class="token plain">512 /mnt/blumeta0/db2/databases/db2inst1/NODE0000</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[db2inst1@c-db2wh-1659492364975075-db2u-0 - Db2U db2inst1]$ df -TH /mnt/bludata0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem Type Size Used Avail Use% Mounted on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/rbd3 ext4 106G 106G 48M 100% /mnt/bludata0      &lt;=======</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Concerned about `data-c-db2wh-1659492364975075-db2u-0` which shows 48M left.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="db2ucluster-resource-configuration"></a><code>db2ucluster</code> resource configuration<a class="hash-link" href="#db2ucluster-resource-configuration" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ oc get db2ucluster db2wh-1659492364975075 -o yaml</span></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: db2u.databases.ibm.com/v1^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Db2uCluster^</span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  storage:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: data</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      accessModes:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ReadWriteOnce</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      resources:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        requests:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          storage: 100Gi</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      storageClassName: ocs-storagecluster-ceph-rbd     &lt;====</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: template</span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sc-storage-class"></a>SC (Storage class)<a class="hash-link" href="#sc-storage-class" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># oc get sc</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Storage Class</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                          PROVISIONER                             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ocs-storagecluster-ceph-rbd   openshift-storage.rbd.csi.ceph.com      Delete          Immediate              true                   168d^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ocs-storagecluster-cephfs     openshift-storage.cephfs.csi.ceph.com   Delete          Immediate              true                   168d^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Check if <code>AllowVolumeExpansion</code>  is set to <code>True</code>.     </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ oc describe sc ocs-storagecluster-ceph-rbd</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:                  ocs-storagecluster-ceph-rbd</span></span><span class="token-line" style="color:#393A34"><span class="token plain">IsDefaultClass:        No</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:           description=Provides RWO Filesystem volumes, and RWO and RWX Block volumes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Provisioner:           openshift-storage.rbd.csi.ceph.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters:            clusterID=openshift-storage,csi.storage.k8s.io/controller-expand-secret-name=rook-csi-rbd-provisioner,csi.storage.k8s.io/controller-expand-secret-namespace=openshift-storage,csi.storage.k8s.io/fstype=ext4,csi.storage.k8s.io/no</span></span><span class="token-line" style="color:#393A34"><span class="token plain">de-stage-secret-name=rook-csi-rbd-node,csi.storage.k8s.io/node-stage-secret-namespace=openshift-storage,csi.storage.k8s.io/provisioner-secret-name=rook-csi-rbd-provisioner,csi.storage.k8s.io/provisioner-secret-namespace=openshift-storage,imageFeatur</span></span><span class="token-line" style="color:#393A34"><span class="token plain">es=layering,imageFormat=2,pool=ocs-storagecluster-cephblockpool</span></span><span class="token-line" style="color:#393A34"><span class="token plain">AllowVolumeExpansion:  True    &lt;=====</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MountOptions:          &lt;none&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ReclaimPolicy:         Delete</span></span><span class="token-line" style="color:#393A34"><span class="token plain">VolumeBindingMode:     Immediate</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:                &lt;none&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pvc-detail"></a>PVC detail<a class="hash-link" href="#pvc-detail" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># oc get pvc  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">Persistent Volume Claim</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                          STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS                  AGE</span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span><span class="token-line" style="color:#393A34"><span class="token plain">data-c-db2wh-1659492364975075-db2u-0          Bound    pvc-5746314e-32ea-46d4-9937-e1bae65200a3   100Gi      RWO            ocs-storagecluster-ceph-rbd   92d^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">,,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">activelogs-c-db2wh-1659492364975075-db2u-0    Bound    pvc-b0d72601-b234-4398-a1e5-421e3efbc40a   100Gi      RWO            ocs-storagecluster-ceph-rbd   92d^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span><span class="token-line" style="color:#393A34"><span class="token plain">c-db2wh-1659492364975075-backup               Bound    pvc-a425f12b-9973-48ee-b752-962fda464f1e   100Gi      RWX            ocs-storagecluster-cephfs     92d^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">c-db2wh-1659492364975075-meta                 Bound    pvc-6ff7a820-dc5c-4557-bc73-8d7b1ce615f1   100Gi      RWX            ocs-storagecluster-cephfs     92d^M</span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The data PVC is set as 100 GB.     </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># oc get pvc data-c-db2wh-1659492364975075-db2u-0 -o yaml</span></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: PersistentVolumeClaim</span></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> annotations:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   formation_id: db2wh-1659492364975075</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   pv.kubernetes.io/bind-completed: &quot;yes&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   pv.kubernetes.io/bound-by-controller: &quot;yes&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   storageConfigType: template</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   volume.beta.kubernetes.io/storage-provisioner: openshift-storage.rbd.csi.ceph.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> creationTimestamp: &quot;2022-08-03T02:08:39Z&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> finalizers:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> - kubernetes.io/pvc-protection</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> labels:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   app: db2wh-1659492364975075</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   component: db2wh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   db2u/cpdbr: db2u</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   formation_id: db2wh-1659492364975075</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   icpdsupport/addOnId: db2wh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   icpdsupport/app: db2wh-1659492364975075</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   icpdsupport/createdBy: &quot;1000330999&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   icpdsupport/podSelector: db2u-log</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   icpdsupport/serviceInstanceId: &quot;1659492364975075&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   role: db</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   type: engine</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> name: data-c-db2wh-1659492364975075-db2u-0</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> namespace: cpd</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> ownerReferences:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> - apiVersion: db2u.databases.ibm.com/v1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   kind: Formation</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   name: db2wh-1659492364975075</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   uid: 13331549-de5b-400a-8564-eb296d1362a7</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> resourceVersion: &quot;104491131&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> uid: 5746314e-32ea-46d4-9937-e1bae65200a3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> accessModes:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> - ReadWriteOnce</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> resources:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   requests:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     storage: 100Gi   &lt;===</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> storageClassName: ocs-storagecluster-ceph-rbd    &lt;===</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> volumeMode: Filesystem   &lt;===</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> volumeName: pvc-5746314e-32ea-46d4-9937-e1bae65200a3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">status:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> accessModes:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> - ReadWriteOnce</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> capacity:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   storage: 100Gi</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> phase: Bound</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="increase-the-size"></a>Increase the size<a class="hash-link" href="#increase-the-size" title="Direct link to heading">#</a></h2><p>The change will restart DB2 service pod automatically.<br>
Therefore, this needs to be done arranging maintenance time.    </p><p>The example steps are like below.     </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">- Stop application using DB2 WH. </span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Log into the DB2 pod c-db2wh-1659492364975075-db2u-0 and stop DB2 gracefully.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ oc exec -it  c-db2wh-1659492364975075-db2u-0 sh</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">(DB2 Pod terminal)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># as db2uadm user</span></span><span class="token-line" style="color:#393A34"><span class="token plain">whoami   # Check if the current terminal is db2uadm user.   </span></span><span class="token-line" style="color:#393A34"><span class="token plain">wvcli system stop</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># then switch to the user db2inst1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">su - db2inst1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">db2 terminate</span></span><span class="token-line" style="color:#393A34"><span class="token plain">db2 force applications all </span></span><span class="token-line" style="color:#393A34"><span class="token plain">db2 deactivate db bludb</span></span><span class="token-line" style="color:#393A34"><span class="token plain">db2stop force</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ipclean -a</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Change the size in the pvc manually.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ oc edit pvc data-c-db2wh-1659492364975075-db2u-0</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">then manually change the 100Gi to a preferred size.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">The part to change is below one line. </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">resources:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   requests:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     storage: 100Gi    &lt;==== </span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Once the change is saved, check if the change is made to the PVC,</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ oc describe pvc data-c-db2wh-1659492364975075-db2u-0</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Monitor if the db2 pod restarts automatically.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ oc get pod</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ oc describe pod c-db2wh-1659492364975075-db2u-0</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Once restarted, check the file system size again logging into the DB2 pod. </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ oc exec -it  c-db2wh-1659492364975075-db2u-0 su - db2inst1</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">(DB2 pod terminal)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ df -TH /mnt/bludata0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="misc"></a>MISC.<a class="hash-link" href="#misc" title="Direct link to heading">#</a></h2><p>In case SC does not support dynamic change or <code>AllowVolumeExpansio</code> is not set, the change may fail.<br>
NFS SC type is one of example.     </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">error: persistentvolumeclaims &quot;data-c-db2wh-1668719329314611-db2u-0&quot; could not be patched: persistentvolumeclaims &quot;data-c-db2wh-1668719329314611-db2u-0&quot; is forbidden: only dynamically provisioned pvc can be resized and the storageclass that provisions the pvc must support resize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">You can run `oc replace -f /tmp/oc-edit-mf73x.yaml` to try this update again.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/c4pd/increase_storage_size.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ai/docs/c4pd/install_db2_ocp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Install Db2u oltp on Red Hat Openshift without CP4D</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ai/docs/c4pd/create_ocs_storage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create OCS storage Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#check-the-current-storage-configuration" class="table-of-contents__link">Check the current storage configuration</a><ul><li><a href="#file-system-sizes" class="table-of-contents__link">File system sizes</a></li><li><a href="#db2ucluster-resource-configuration" class="table-of-contents__link"><code>db2ucluster</code> resource configuration</a></li><li><a href="#sc-storage-class" class="table-of-contents__link">SC (Storage class)</a></li><li><a href="#pvc-detail" class="table-of-contents__link">PVC detail</a></li></ul></li><li><a href="#increase-the-size" class="table-of-contents__link">Increase the size</a></li><li><a href="#misc" class="table-of-contents__link">MISC.</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ai/docs/intro">Notes</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ai/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Jun Su Lee (junsulee@au1.ibm.com). </div></div></div></footer></div>
<script src="/ai/assets/js/runtime~main.5a258301.js"></script>
<script src="/ai/assets/js/main.fdb5ad91.js"></script>
</body>
</html>