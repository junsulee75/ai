"use strict";(self.webpackChunkai=self.webpackChunkai||[]).push([[760],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return p}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),s=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):d(d({},n),e)),t},m=function(e){var n=s(e.components);return r.createElement(c.Provider,{value:n},e.children)},l={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=s(t),p=a,b=u["".concat(c,".").concat(p)]||u[p]||l[p]||i;return t?r.createElement(b,d(d({ref:n},m),{},{components:t})):r.createElement(b,d({ref:n},m))}));function p(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,d=new Array(i);d[0]=u;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,d[1]=o;for(var s=2;s<i;s++)d[s]=t[s];return r.createElement.apply(null,d)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},4126:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return m},default:function(){return u}});var r=t(7462),a=t(3366),i=(t(7294),t(3905)),d=["components"],o={sidebar_position:1},c="DMC Pods failure status",s={unversionedId:"c4pd/pd/dmc_pod_failure",id:"c4pd/pd/dmc_pod_failure",isDocsHomePage:!1,title:"DMC Pods failure status",description:"DMC instance status shows failed status.",source:"@site/docs/c4pd/pd/dmc_pod_failure.md",sourceDirName:"c4pd/pd",slug:"/c4pd/pd/dmc_pod_failure",permalink:"/ai/docs/c4pd/pd/dmc_pod_failure",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/c4pd/pd/dmc_pod_failure.md",version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Install Db2 on Red Hat Openshift",permalink:"/ai/docs/c4pd/install_db2_ocp"},next:{title:"dfdfd",permalink:"/ai/docs/tutorial-basics/congratulations"}},m=[{value:"Problem determination",id:"problem-determination",children:[{value:"Checking pods",id:"checking-pods",children:[]}]},{value:"Resolution",id:"resolution",children:[{value:"Restart Pods",id:"restart-pods",children:[]}]},{value:"Reference",id:"reference",children:[]}],l={toc:m};function u(e){var n=e.components,o=(0,a.Z)(e,d);return(0,i.kt)("wrapper",(0,r.Z)({},l,o,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"dmc-pods-failure-status"},"DMC Pods failure status"),(0,i.kt)("p",null,"DMC instance status shows ",(0,i.kt)("inlineCode",{parentName:"p"},"failed")," status.    "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"DMC failure webeconsole",src:t(3291).Z}),"  "),(0,i.kt)("h2",{id:"problem-determination"},"Problem determination"),(0,i.kt)("h3",{id:"checking-pods"},"Checking pods"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"c-ibm-dmc-1655866151309320-redis-m")," name pods are abnormal status and not ready.   "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"[root@bastion ~]# oc get pod\nNAME                                                         READY   STATUS            RESTARTS   AGE\nc-db2oltp-1655862364134421-db2u-0                            1/1     Running           0          132d\nc-db2oltp-1655862364134421-etcd-0                            1/1     Running           0          132d\nc-ibm-dmc-1655866151309320-redis-m-0                         0/4     Init:0/1          478        121d\nc-ibm-dmc-1655866151309320-redis-m-1                         0/4     PodInitializing   2          121d\nc-ibm-dmc-1655866151309320-redis-m-2                         0/4     Init:0/1          465        121d\nc-ibm-dmc-1655866151309320-redis-s-0                         4/4     Running           1          132d\nc-ibm-dmc-1655866151309320-redis-s-1                         4/4     Running           3          132d\nc-ibm-dmc-1655866151309320-redis-s-2                         4/4     Running           5          132d\n...\n")),(0,i.kt)("p",null,"There is ",(0,i.kt)("inlineCode",{parentName:"p"},"Redis")," side problem failing to mount a secret token.    "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"[root@bastion ~]# oc describe pod c-ibm-dmc-1655866151309320-redis-m-1\n...\nLabels:         ServiceInstanceID=1655866151309320\n                app=dmc\n                app.kubernetes.io/instance=1655866151309320\n                app.kubernetes.io/managed-by=operator\n                app.kubernetes.io/name=dmc\n                app.kubernetes.io/redis-instance=c-ibm-dmc-1655866151309320-redis-m\n                cluster_role=leader\n...\nVolumes:\n  data:\n    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)\n    ClaimName:  data-c-ibm-dmc-1655866151309320-redis-m-1\n    ReadOnly:   false\n  conf:\n    Type:       EmptyDir (a temporary directory that shares a pod's lifetime)\n    Medium:     \n    SizeLimit:  <unset>\n  ibm-dmc-1655866151309320-redis-token-mnm7r:\n    Type:        Secret (a volume populated by a Secret)\n    SecretName:  ibm-dmc-1655866151309320-redis-token-mnm7r\n    Optional:    false\n...\n\nEvents:\n  Type     Reason       Age                     From     Message\n  ----     ------       ----                    ----     -------\n  Warning  FailedMount  24m (x2374 over 18d)    kubelet  Unable to attach or mount volumes: unmounted volumes=[data], unattached volumes=[data ibm-dmc-1655866151309320-redis-token-mnm7r conf]: timed out waiting for the condition\n  Warning  FailedMount  8m53s (x6723 over 18d)  kubelet  Unable to attach or mount volumes: unmounted volumes=[data], unattached volumes=[conf data ibm-dmc-1655866151309320-redis-token-mnm7r]: timed out waiting for the condition\n  Warning  FailedMount  4m22s (x2346 over 18d)  kubelet  Unable to attach or mount volumes: unmounted volumes=[data], unattached volumes=[ibm-dmc-1655866151309320-redis-token-mnm7r conf data]: timed out waiting for the condition\n")),(0,i.kt)("h2",{id:"resolution"},"Resolution"),(0,i.kt)("h3",{id:"restart-pods"},"Restart Pods"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'[root@bastion ~]# oc delete pod c-ibm-dmc-1655866151309320-redis-m-0  c-ibm-dmc-1655866151309320-redis-m-1 c-ibm-dmc-1655866151309320-redis-m-2 c-ibm-dmc-1655866151309320-redis-s-0 c-ibm-dmc-1655866151309320-redis-s-1 c-ibm-dmc-1655866151309320-redis-s-2\npod "c-ibm-dmc-1655866151309320-redis-m-0" deleted\npod "c-ibm-dmc-1655866151309320-redis-m-1" deleted\npod "c-ibm-dmc-1655866151309320-redis-m-2" deleted\npod "c-ibm-dmc-1655866151309320-redis-s-0" deleted\npod "c-ibm-dmc-1655866151309320-redis-s-1" deleted\npod "c-ibm-dmc-1655866151309320-redis-s-2" deleted\n')),(0,i.kt)("p",null,"After a while, Pods are running successfully.   "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"[root@bastion ~]# oc get pod\nNAME                                                         READY   STATUS      RESTARTS   AGE\nc-db2oltp-1655862364134421-db2u-0                            1/1     Running     0          132d\nc-db2oltp-1655862364134421-etcd-0                            1/1     Running     0          132d\nc-ibm-dmc-1655866151309320-redis-m-0                         3/4     Running     0          3m8s\nc-ibm-dmc-1655866151309320-redis-m-1                         4/4     Running     0          3m31s\nc-ibm-dmc-1655866151309320-redis-m-2                         3/4     Running     0          3m15s\nc-ibm-dmc-1655866151309320-redis-s-0                         4/4     Running     0          3m22s\nc-ibm-dmc-1655866151309320-redis-s-1                         4/4     Running     0          3m25s\nc-ibm-dmc-1655866151309320-redis-s-2                         3/4     Running     0          3m24s\n...\n")),(0,i.kt)("p",null,"Check the latest events.   "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'[root@bastion ~]# oc describe pod c-ibm-dmc-1655866151309320-redis-m-0\n...\nEvents:\n  Type    Reason          Age                  From               Message\n  ----    ------          ----                 ----               -------\n  Normal  Scheduled       10m                  default-scheduler  Successfully assigned sandy/c-ibm-dmc-1655866151309320-redis-m-0 to worker03.js.ocp.adl\n  Normal  AddedInterface  10m                  multus             Add eth0 [121.159.1.17/23]\n  Normal  Pulled          9m55s (x2 over 10m)  kubelet            Container image "cp.icr.io/cp/redis-mgmt-5.0.9@sha256:87121bef639910da91ede486706c1c4840b15e31a1d1e5dc5c3a48a55465d701" already present on machine\n  Normal  Created         9m54s (x2 over 10m)  kubelet            Created container init\n  Normal  Started         9m54s (x2 over 10m)  kubelet            Started container init\n  Normal  Pulling         9m43s                kubelet            Pulling image "cp.icr.io/cp/redis-db-5.0.9@sha256:1041a0f7c2dd8a8886fe1bc22ea20c3ef8a60c44da77e27e1c7232111c6c2c54"\n  Normal  Pulled          8m27s                kubelet            Successfully pulled image "cp.icr.io/cp/redis-db-5.0.9@sha256:1041a0f7c2dd8a8886fe1bc22ea20c3ef8a60c44da77e27e1c7232111c6c2c54" in 1m16.190636234s\n  Normal  Created         8m26s                kubelet            Created container db\n  Normal  Started         8m26s                kubelet            Started container db\n  Normal  Pulling         8m26s                kubelet            Pulling image "cp.icr.io/cp/redis-proxy-5.0.9@sha256:a6bf03767ca72fddbcbb2b83fc8cfb3fd71ef1477af78d6c6d7834bdf77c00b8"\n  Normal  Pulled          7m51s                kubelet            Successfully pulled image "cp.icr.io/cp/redis-proxy-5.0.9@sha256:a6bf03767ca72fddbcbb2b83fc8cfb3fd71ef1477af78d6c6d7834bdf77c00b8" in 35.033023959s\n  Normal  Created         7m50s                kubelet            Created container proxy\n  Normal  Started         7m50s                kubelet            Started container proxy\n  Normal  Pulled          7m50s                kubelet            Container image "cp.icr.io/cp/redis-mgmt-5.0.9@sha256:87121bef639910da91ede486706c1c4840b15e31a1d1e5dc5c3a48a55465d701" already present on machine\n  Normal  Created         7m48s                kubelet            Created container mgmt\n  Normal  Started         7m48s                kubelet            Started container mgmt\n  Normal  Pulling         7m48s                kubelet            Pulling image "cp.icr.io/cp/redis-proxylog-5.0.9@sha256:84b4b5fa30b738631cca76a08c77526e33faad9f66727a8dee1b9afc0b1c65e7"\n  Normal  Pulled          7m26s                kubelet            Successfully pulled image "cp.icr.io/cp/redis-proxylog-5.0.9@sha256:84b4b5fa30b738631cca76a08c77526e33faad9f66727a8dee1b9afc0b1c65e7" in 22.338468729s\n  Normal  Created         7m24s                kubelet            Created container proxylog\n  Normal  Started         7m24s                kubelet            Started container proxylog\n')),(0,i.kt)("h2",{id:"reference"},"Reference"),(0,i.kt)("p",null,"Other DMC issue examples",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cp-data/4.0?topic=console-redis-fails-start-db2-data-management"},"Redis fails to start for Db2 Data Management Console")))}u.isMDXComponent=!0},3291:function(e,n,t){n.Z=t.p+"assets/images/dmcfail_webconsole-102113f925ff960661d40ffdbf0496c2.png"}}]);