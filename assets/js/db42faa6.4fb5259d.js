"use strict";(self.webpackChunkai=self.webpackChunkai||[]).push([[2764],{3905:function(e,n,r){r.d(n,{Zo:function(){return s},kt:function(){return b}});var t=r(7294);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function p(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=t.createContext({}),d=function(e){var n=t.useContext(i),r=n;return e&&(r="function"==typeof e?e(n):c(c({},n),e)),r},s=function(e){var n=d(e.components);return t.createElement(i.Provider,{value:n},e.children)},l={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var r=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=d(r),b=o,u=m["".concat(i,".").concat(b)]||m[b]||l[b]||a;return r?t.createElement(u,c(c({ref:n},s),{},{components:r})):t.createElement(u,c({ref:n},s))}));function b(e,n){var r=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=r.length,c=new Array(a);c[0]=m;var p={};for(var i in n)hasOwnProperty.call(n,i)&&(p[i]=n[i]);p.originalType=e,p.mdxType="string"==typeof e?e:o,c[1]=p;for(var d=2;d<a;d++)c[d]=r[d];return t.createElement.apply(null,c)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},7251:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return p},contentTitle:function(){return i},metadata:function(){return d},toc:function(){return s},default:function(){return m}});var t=r(7462),o=r(3366),a=(r(7294),r(3905)),c=["components"],p={sidebar_position:3},i="Creating DB2 warehouse instance in C4PD",d={unversionedId:"c4pd/creating_db2wh_cp4d",id:"c4pd/creating_db2wh_cp4d",isDocsHomePage:!1,title:"Creating DB2 warehouse instance in C4PD",description:"Once Db2 warehouse operators related resources are installed and configured on CP4D,",source:"@site/docs/c4pd/creating_db2wh_cp4d.md",sourceDirName:"c4pd",slug:"/c4pd/creating_db2wh_cp4d",permalink:"/ai/docs/c4pd/creating_db2wh_cp4d",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/c4pd/creating_db2wh_cp4d.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Creating DB2 and DMC instance in C4PD",permalink:"/ai/docs/c4pd/creating_db2_dmc_cp4d"},next:{title:"Install Db2u oltp on Red Hat Openshift without CP4D",permalink:"/ai/docs/c4pd/install_db2_ocp"}},s=[{value:"Check prerequite resources",id:"check-prerequite-resources",children:[]},{value:"Log on CP4D web console",id:"log-on-cp4d-web-console",children:[]},{value:"Create DB2 instance",id:"create-db2-instance",children:[]},{value:"Failure with insufficient memory",id:"failure-with-insufficient-memory",children:[]}],l={toc:s};function m(e){var n=e.components,p=(0,o.Z)(e,c);return(0,a.kt)("wrapper",(0,t.Z)({},l,p,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"creating-db2-warehouse-instance-in-c4pd"},"Creating DB2 warehouse instance in C4PD"),(0,a.kt)("p",null,"Once Db2 warehouse operators related resources are installed and configured on CP4D,",(0,a.kt)("br",{parentName:"p"}),"\n","You can create an instance through CP4D web console.      "),(0,a.kt)("h2",{id:"check-prerequite-resources"},"Check prerequite resources"),(0,a.kt)("p",null,"There are multiple types of resources.",(0,a.kt)("br",{parentName:"p"}),"\n","Checking each, the followings will show up.",(0,a.kt)("br",{parentName:"p"}),"\n","The majority of those are operators that helps to configure DB2/Db2wh/DMC instances and catalog/subscription related resources.     "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'[root@api.jscp4d.cp.fyre.ibm.com ~]# oc get pod -A  |egrep -i "db2|dmc"\ncpd-operators                                      db2u-day2-ops-controller-manager-6bdcbcc889-5hmtx                 1/1     Running     0             11h\ncpd-operators                                      db2u-operator-manager-6bdd5889f9-m9988                            1/1     Running     0             11h\ncpd-operators                                      ibm-db2oltp-cp4d-operator-catalog-42d5w                           1/1     Running     0             11h\ncpd-operators                                      ibm-db2oltp-cp4d-operator-controller-manager-5c8b664467-dq4px     1/1     Running     0             11h\ncpd-operators                                      ibm-db2uoperator-catalog-89grk                                    1/1     Running     0             11h\ncpd-operators                                      ibm-db2wh-cp4d-operator-catalog-9brvv                             1/1     Running     0             11h\ncpd-operators                                      ibm-db2wh-cp4d-operator-controller-manager-5999fcbc9f-t78nw       1/1     Running     0             11h\ncpd-operators                                      ibm-dmc-controller-manager-58f67cbd78-4nzmq                       1/1     Running     0             11h\ncpd-operators                                      ibm-dmc-operator-catalog-ckccm                                    1/1     Running     0             11h\nsandy                                              ibm-dmc-addon-api-6748bc9594-mspw8                                1/1     Running     0             10h\nsandy                                              ibm-dmc-addon-ui-fb55f9c96-wvtx6  \n\n[root@api.jscp4d.cp.fyre.ibm.com ~]# oc get service  -A  |egrep -i "db2|dmc"\ncpd-operators                                      db2u-day2-ops-controller-manager-metrics-service           ClusterIP      172.30.118.245   <none>                                 8443/TCP                                         11h\ncpd-operators                                      ibm-db2oltp-cp4d-operator-catalog                          ClusterIP      172.30.55.179    <none>                                 50051/TCP                                        11h\ncpd-operators                                      ibm-db2oltp-cp4d-operator-controller-mngr-metrics-svc      ClusterIP      172.30.170.115   <none>                                 8443/TCP                                         11h\ncpd-operators                                      ibm-db2uoperator-catalog                                   ClusterIP      172.30.54.163    <none>                                 50051/TCP                                        11h\ncpd-operators                                      ibm-db2wh-cp4d-operator-catalog                            ClusterIP      172.30.98.37     <none>                                 50051/TCP                                        11h\ncpd-operators                                      ibm-db2wh-cp4d-operator-controller-mngr-metrics-svc        ClusterIP      172.30.234.126   <none>                                 8443/TCP                                         11h\ncpd-operators                                      ibm-dmc-operator-catalog                                   ClusterIP      172.30.1.85      <none>                                 50051/TCP                                        11h\nsandy                                              ibm-dmc-addon-api                                          ClusterIP      172.30.166.166   <none>                                 5555/TCP,4444/TCP                                10h\nsandy                                              ibm-dmc-addon-ui                                           ClusterIP      172.30.13.121    <none>                                 8080/TCP,8443/TCP                                10h\n\n[root@api.jscp4d.cp.fyre.ibm.com ~]# oc get deployment  -A  |egrep -i "db2|dmc"\ncpd-operators                                      db2u-day2-ops-controller-manager                       1/1     1            1           11h\ncpd-operators                                      db2u-operator-manager                                  1/1     1            1           11h\ncpd-operators                                      ibm-db2oltp-cp4d-operator-controller-manager           1/1     1            1           11h\ncpd-operators                                      ibm-db2wh-cp4d-operator-controller-manager             1/1     1            1           11h\ncpd-operators                                      ibm-dmc-controller-manager                             1/1     1            1           11h\nsandy                                              ibm-dmc-addon-api                                      1/1     1            1           10h\nsandy                                              ibm-dmc-addon-ui                                       1/1     1            1           10h\n\n[root@api.jscp4d.cp.fyre.ibm.com ~]# oc get replicaset -A  |egrep -i "db2|dmc"\ncpd-operators                                      db2u-day2-ops-controller-manager-6bdcbcc889                       1         1         1       11h\ncpd-operators                                      db2u-operator-manager-6bdd5889f9                                  1         1         1       11h\ncpd-operators                                      ibm-db2oltp-cp4d-operator-controller-manager-5c8b664467           1         1         1       11h\ncpd-operators                                      ibm-db2wh-cp4d-operator-controller-manager-5999fcbc9f             1         1         1       11h\ncpd-operators                                      ibm-dmc-controller-manager-58f67cbd78                             1         1         1       11h\ncpd-operators                                      ibm-dmc-controller-manager-659ff47d8c                             0         0         0       11h\nsandy                                              ibm-dmc-addon-api-6748bc9594                                      1         1         1       10h\nsandy                                              ibm-dmc-addon-ui-fb55f9c96                                        1         1         1       10h\n')),(0,a.kt)("h2",{id:"log-on-cp4d-web-console"},"Log on CP4D web console"),(0,a.kt)("p",null,"After CPD/C4PD installation, you should have the login credential information already.",(0,a.kt)("br",{parentName:"p"}),"\n","If you are not sure or forgot those, you can retrieve the information running the CPD CLI(command line interface command like below example.    "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"[root@api.jscp4d.cp.fyre.ibm.com v4.7]# /root/tmp/cpd-cli-linux-EE-13.0.2-30/cpd-cli manage get-cpd-instance-details --cpd_instance_ns=sandy --get_admin_initial_credentials=true\n[INFO] 2023-10-21T14:31:14.386446Z Checking architecture: amd64\n[INFO] 2023-10-21T14:31:14.386465Z Checking podman or docker\n[INFO] 2023-10-21T14:31:14.407539Z Dockerexe: podman\n[INFO] 2023-10-21T14:31:14.435192Z Container olm-utils-play-v2 is running already. Image: icr.io/cpopen/cpd/olm-utils-v2:latest\n[INFO] 2023-10-21T14:31:14.469609Z Processing subcommand get-cpd-instance-details\n[INFO] 2023-10-21T14:31:14.469644Z Run command: podman exec -it olm-utils-play-v2 get-cpd-instance-details --cpd_instance_ns=sandy --get_admin_initial_credentials=true\nCPD Url: cpd-sandy.apps.jscp4d.cp.fyre.ibm.com\nCPD Username: admin\nCPD Password: 5YKVECzcPiNx\n[SUCCESS] 2023-10-21T14:31:14.788614Z You may find output and logs in the /root/tmp/cpd-cli-linux-EE-13.0.2-30/cpd-cli-workspace/olm-utils-workspace/work directory.\n[SUCCESS] 2023-10-21T14:31:14.788663Z The get-cpd-instance-details command ran successfully.\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The tools are available for download from ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/IBM/cpd-cli/releases"},"cpd-cli github page"),".     ")),(0,a.kt)("p",null,"Login CP4D web console using the credentials.      "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"c4pd login",src:r(810).Z}),"     "),(0,a.kt)("p",null,"From the hone page, click ",(0,a.kt)("inlineCode",{parentName:"p"},"View all"),"  in the ",(0,a.kt)("inlineCode",{parentName:"p"},"My instance")," box.",(0,a.kt)("br",{parentName:"p"}),"\n","Or click ",(0,a.kt)("inlineCode",{parentName:"p"},"Databases")," in the left pane.",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd home",src:r(8148).Z}),"     "),(0,a.kt)("p",null,"The page shows the current database list.",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd instance none",src:r(2944).Z}),"     "),(0,a.kt)("p",null,"Click ",(0,a.kt)("inlineCode",{parentName:"p"},"Create a database")," at right top.    "),(0,a.kt)("h2",{id:"create-db2-instance"},"Create DB2 instance"),(0,a.kt)("p",null,"From the availalbe services, select ",(0,a.kt)("inlineCode",{parentName:"p"},"Db2 warehouse"),".     "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"c4pd select service",src:r(491).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd select service",src:r(9436).Z}),"     "),(0,a.kt)("p",null,"Select options following the pages and click ",(0,a.kt)("inlineCode",{parentName:"p"},"Next"),".",(0,a.kt)("br",{parentName:"p"}),"\n","The followings are few screen examples.",(0,a.kt)("br",{parentName:"p"}),"\n","Pages detail may change depending on versions.    "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(2965).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(410).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(9871).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(6090).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(2400).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(1446).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(5342).Z}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(7055).Z}),"   "),(0,a.kt)("p",null,"Review the selections and click ",(0,a.kt)("inlineCode",{parentName:"p"},"create"),".  "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(1138).Z}),"   "),(0,a.kt)("p",null,"Monitor the progress or coffee time until the completion. "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"c4pd Db2 configure",src:r(6447).Z}),"    "),(0,a.kt)("p",null,"You may want to check until db2wh pods are ",(0,a.kt)("inlineCode",{parentName:"p"},"Running")," status.   "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"[root@api.jscp4d.cp.fyre.ibm.com v4.7]# oc get pods -A -o wide |grep db2\ncpd-operators                                      db2u-day2-ops-controller-manager-6bdcbcc889-5hmtx                 1/1     Running     0             13h     10.254.12.53    worker2.jscp4d.cp.fyre.ibm.com   <none>           <none>\ncpd-operators                                      db2u-operator-manager-6bdd5889f9-m9988                            1/1     Running     0             13h     10.254.12.55    worker2.jscp4d.cp.fyre.ibm.com   <none>           <none>\ncpd-operators                                      ibm-db2oltp-cp4d-operator-catalog-42d5w                           1/1     Running     0             13h     10.254.16.43    worker0.jscp4d.cp.fyre.ibm.com   <none>           <none>\ncpd-operators                                      ibm-db2oltp-cp4d-operator-controller-manager-5c8b664467-dq4px     1/1     Running     0             13h     10.254.16.38    worker0.jscp4d.cp.fyre.ibm.com   <none>           <none>\ncpd-operators                                      ibm-db2uoperator-catalog-89grk                                    1/1     Running     0             13h     10.254.12.70    worker2.jscp4d.cp.fyre.ibm.com   <none>           <none>\ncpd-operators                                      ibm-db2wh-cp4d-operator-catalog-9brvv                             1/1     Running     0             13h     10.254.12.69    worker2.jscp4d.cp.fyre.ibm.com   <none>           <none>\ncpd-operators                                      ibm-db2wh-cp4d-operator-controller-manager-5999fcbc9f-t78nw       1/1     Running     0             13h     10.254.12.71    worker2.jscp4d.cp.fyre.ibm.com   <none>           <none>\nsandy                                              c-db2wh-1697924597343197-db2u-0                                   0/1     Pending     0             71m     <none>          <none>                           <none>           <none>\nsandy                                              c-db2wh-1697924597343197-db2u-1                                   0/1     Pending     0             71m     <none>          <none>                           <none>           <none>\nsandy                                              c-db2wh-1697924597343197-db2u-2                                   0/1     Pending     0             71m     <none>          <none>                           <none>           <none>\nsandy                                              c-db2wh-1697924597343197-etcd-0                                   1/1     Running     0             71m     10.254.22.63    worker1.jscp4d.cp.fyre.ibm.com   <none>           <none>\nsandy                                              c-db2wh-1697924597343197-etcd-1                                   1/1     Running     0             71m     10.254.18.95    worker0.jscp4d.cp.fyre.ibm.com   <none>           <none>\nsandy                                              c-db2wh-1697924597343197-etcd-2                                   1/1     Running     0             71m     10.254.12.158   worker2.jscp4d.cp.fyre.ibm.com   <none>           <none>\nsandy                                              c-db2wh-1697924597343197-instdb-vtfvx                             0/1     Completed   0             72m     10.254.18.94    worker0.jscp4d.cp.fyre.ibm.com   <none>           <none>\nsandy                                              c-db2wh-1697924597343197-tools-87bc67b96-kns47                    1/1     Running     0             72m     10.254.18.93    worker0.jscp4d.cp.fyre.ibm.com   <none>           <none>\n")),(0,a.kt)("h2",{id:"failure-with-insufficient-memory"},"Failure with insufficient memory"),(0,a.kt)("p",null,"In case memory is not enough, it refuses to schedule.  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"[root@api.jscp4d.cp.fyre.ibm.com v4.7]# oc rsh  c-db2oltp-1697933778158541-db2u-0\n...\nEvents:\n  Type     Reason            Age                     From               Message\n  ----     ------            ----                    ----               -------\n  Warning  FailedScheduling  8m4s (x247 over 3h12m)  default-scheduler  0/6 nodes are available: 3 Insufficient memory, 3 node(s) had untolerated taint {node-role.kubernetes.io/master: }. preemption: 0/6 nodes are available: 3 No preemption victims found for incoming pod, 3 Preemption is not helpful for scheduling.\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"In my case, it failed on 3 worker nodes that has 32 GB memory each.")))}m.isMDXComponent=!0},810:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_01-702d09d0f0c2e9e089671ad7340c9469.png"},8148:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_02-c58e78326f03b6567d0a3ad74f3df3f8.png"},2944:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_03-3facd27aa24987f72cf5c271aded4573.png"},491:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_04-b421efef9f3eb8e6dc38374d1f74830a.png"},9436:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_05-18ca3cdfa7d021060a192dfbff66057e.png"},2965:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_06-18d5999abf6adbb4791a1fb6f8fc956d.png"},410:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_07-e222c8c428a00a500bfd24c6523d2098.png"},9871:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_08-5c631c1b616860b0cd5bd4ab300c48df.png"},6090:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_09-37047b9afb272be8b24f871d2ae87193.png"},2400:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_10-fd4a91a6138f082ffc8088b1368f22dc.png"},1446:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_11-2fd5d0ce435ea93d7fefce89cef61ac5.png"},5342:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_12-aa5b9d58d6e3466386b8acb1800afe36.png"},7055:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_13-0cfa6094f974a105325418d159db95de.png"},1138:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_14-6abf2a095877abe2feb6d20aca5e1e54.png"},6447:function(e,n,r){n.Z=r.p+"assets/images/db2wh_cp4d_15-a95318bba4a40ec153057007241a750b.png"}}]);